(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d221d85"],{cba1:function(a,t,e){"use strict";e.r(t);var r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("AkademikLayout",{attrs:{showrightsidebar:!1}},[e("ModuleHeader",{scopedSlots:a._u([{key:"icon",fn:function(){return[a._v(" mdi-format-columns ")]},proxy:!0},{key:"name",fn:function(){return[a._v(" KARTU RENCANA STUDI ")]},proxy:!0},Object.keys(a.datakrs).length?{key:"subtitle",fn:function(){return[a._v(" TAHUN AKADEMIK "+a._s(a.tahun_akademik)+" SEMESTER "+a._s(a.$store.getters["uiadmin/getNamaSemester"](a.semester_akademik))+" - "+a._s(a.nama_prodi)+" ")]},proxy:!0}:null,{key:"breadcrumbs",fn:function(){return[e("v-breadcrumbs",{staticClass:"pa-0",attrs:{items:a.breadcrumbs},scopedSlots:a._u([{key:"divider",fn:function(){return[e("v-icon",[a._v("mdi-chevron-right")])]},proxy:!0}])})]},proxy:!0},{key:"desc",fn:function(){return[e("v-alert",{attrs:{color:"cyan",border:"left","colored-border":"",type:"info"}},[a._v(" Halaman untuk melihat detail krs mahasiswa ")])]},proxy:!0}],null,!0)}),Object.keys(a.datakrs).length?e("v-container",{attrs:{fluid:""}},[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("DataKRS",{attrs:{datakrs:a.datakrs,url:"/akademik/perkuliahan/krs/"+a.datakrs.id+"/detail",totalmatkul:a.totalMatkul,totalsks:a.totalSKS}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-form",{ref:"frmdata",attrs:{"lazy-validation":""},model:{value:a.form_valid,callback:function(t){a.form_valid=t},expression:"form_valid"}},[e("v-card",[e("v-card-title",[a._v(" DAFTAR PENYELENGGARAAN MATAKULIAH "),e("v-spacer")],1),e("v-card-text",[e("v-data-table",{attrs:{headers:a.headers,items:a.datatable,"item-key":"id","show-select":"","disable-pagination":!0,"hide-default-footer":!0,loading:a.datatableLoading,"loading-text":"Loading... Please wait"},scopedSlots:a._u([{key:"no-data",fn:function(){return[a._v(" Data matakuliah belum tersedia silahkan hubungi bagian akademik ")]},proxy:!0}],null,!1,1521005542),model:{value:a.daftar_matkul_selected,callback:function(t){a.daftar_matkul_selected=t},expression:"daftar_matkul_selected"}})],1),e("v-card-actions",[e("v-chip",{staticClass:"mr-2",attrs:{color:"info",outlined:""}},[e("strong",[a._v("Jumlah Matakuliah Terpilih:")]),a._v(" "+a._s(a.daftar_matkul_selected.length)+" ")]),e("v-chip",{attrs:{color:"info",outlined:""}},[e("strong",[a._v("Jumlah SKS Terpilih:")]),a._v(" "+a._s(a.totalSKS)+" ")]),e("v-spacer"),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return t.stopPropagation(),a.closedialogfrm(t)}}},[a._v("BATAL")]),e("v-btn",{attrs:{color:"blue darken-1",text:"",loading:a.btnLoading,disabled:!a.form_valid||a.btnLoading||!a.daftar_matkul_selected.length>0},on:{click:function(t){return t.stopPropagation(),a.save(t)}}},[a._v(" SIMPAN ")])],1)],1)],1)],1)],1)],1):a._e()],1)},n=[],s=(e("b64b"),e("96cf"),e("1da1")),i=e("e60c"),d=e("e477"),o=e("b468"),l={name:"PerkuliahanKRSDetail",created:function(){this.krs_id=this.$route.params.krsid,this.breadcrumbs=[{text:"HOME",disabled:!1,href:"/dashboard/"+this.$store.getters["auth/AccessToken"]},{text:"AKADEMIK",disabled:!1,href:"/akademik"},{text:"PERKULIAHAN",disabled:!1,href:"#"},{text:"KRS",disabled:!1,href:"/akademik/perkuliahan/krs/daftar"},{text:"TAMBAH MATAKULIAH",disabled:!0,href:"#"}],this.fetchKRS()},data:function(){return{firstloading:!0,nama_prodi:null,tahun_akademik:null,semester_akademik:null,btnLoading:!1,form_valid:!0,krs_id:null,datakrs:{},jumlah_matkul:0,jumlah_sks:0,daftar_matkul_selected:[],datatableLoading:!1,expanded:[],datatable:[],headers:[{text:"KODE",value:"kmatkul",sortable:!0,width:120},{text:"NAMA MATAKULIAH",value:"nmatkul",sortable:!0},{text:"SKS",value:"sks",sortable:!1,width:120},{text:"SMT",value:"semester",sortable:!1,width:120},{text:"TAHUN MATKUL",value:"ta_matkul",sortable:!1,width:120}]}},methods:{fetchKRS:function(){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.$ajax.get("/akademik/perkuliahan/krs/"+a.krs_id,{headers:{Authorization:a.$store.getters["auth/Token"]}}).then((function(t){var e=t.data;if(a.datakrs=e.krs,Object.keys(a.datakrs).length){var r=a.datakrs.kjur;a.nama_prodi=a.$store.getters["uiadmin/getProdiName"](r),a.tahun_akademik=a.datakrs.tahun,a.semester_akademik=a.datakrs.idsmt}}));case 2:if(!Object.keys(a.datakrs).length){t.next=6;break}return a.datatableLoading=!0,t.next=6,a.$ajax.post("/akademik/perkuliahan/krs/penyelenggaraan",{nim:a.datakrs.nim,prodi_id:a.datakrs.kjur,ta:a.datakrs.tahun,semester_akademik:a.datakrs.idsmt,pid:"belumterdaftar"},{headers:{Authorization:a.$store.getters["auth/Token"]}}).then((function(t){var e=t.data;a.datatable=e.penyelenggaraan,a.datatableLoading=!1})).catch((function(){a.datatableLoading=!1}));case 6:case"end":return t.stop()}}),t)})))()},save:function(){var a=Object(s["a"])(regeneratorRuntime.mark((function a(){var t=this;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!this.$refs.frmdata.validate()){a.next=4;break}return this.btnLoading=!0,a.next=4,this.$ajax.post("/akademik/perkuliahan/krs/storematkul",{krs_id:this.krs_id,matkul_selected:JSON.stringify(Object.assign({},this.daftar_matkul_selected))},{headers:{Authorization:this.$store.getters["auth/Token"]}}).then((function(){t.btnLoading=!1,t.closedialogfrm()})).catch((function(){t.btnLoading=!1}));case 4:case"end":return a.stop()}}),a,this)})));function t(){return a.apply(this,arguments)}return t}(),closedialogfrm:function(){var a=this;setTimeout((function(){a.$router.push("/akademik/perkuliahan/krs/"+a.krs_id+"/detail")}),300)}},computed:{totalSKS:function(){var a,t=0;for(a in this.daftar_matkul_selected)t+=parseInt(this.daftar_matkul_selected[a].sks);return t}},components:{AkademikLayout:i["a"],ModuleHeader:d["a"],DataKRS:o["a"]}},u=l,c=e("2877"),k=e("6544"),m=e.n(k),h=e("0798"),f=e("2bc5"),b=e("8336"),_=e("b0af"),v=e("99d9"),p=e("cc20"),g=e("62ad"),A=e("a523"),x=e("8fea"),y=e("4bd4"),S=e("132d"),w=e("0fd9"),T=e("2fa4"),K=Object(c["a"])(u,r,n,!1,null,null,null);t["default"]=K.exports;m()(K,{VAlert:h["a"],VBreadcrumbs:f["a"],VBtn:b["a"],VCard:_["a"],VCardActions:v["b"],VCardText:v["d"],VCardTitle:v["e"],VChip:p["a"],VCol:g["a"],VContainer:A["a"],VDataTable:x["a"],VForm:y["a"],VIcon:S["a"],VRow:w["a"],VSpacer:T["a"]})}}]);