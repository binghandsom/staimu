(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d05cb"],{"683f":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("AkademikLayout",{attrs:{showrightsidebar:!1}},[e("ModuleHeader",{scopedSlots:t._u([{key:"icon",fn:function(){return[t._v(" mdi-format-columns ")]},proxy:!0},{key:"name",fn:function(){return[t._v(" KARTU RENCANA STUDI ")]},proxy:!0},Object.keys(t.datakrs).length?{key:"subtitle",fn:function(){return[t._v(" TAHUN AKADEMIK "+t._s(t.tahun_akademik)+" SEMESTER "+t._s(t.$store.getters["uiadmin/getNamaSemester"](t.semester_akademik))+" - "+t._s(t.nama_prodi)+" ")]},proxy:!0}:null,{key:"breadcrumbs",fn:function(){return[e("v-breadcrumbs",{staticClass:"pa-0",attrs:{items:t.breadcrumbs},scopedSlots:t._u([{key:"divider",fn:function(){return[e("v-icon",[t._v("mdi-chevron-right")])]},proxy:!0}])})]},proxy:!0},{key:"desc",fn:function(){return[e("v-alert",{attrs:{color:"cyan",border:"left","colored-border":"",type:"info"}},[t._v(" Halaman untuk melihat detail krs mahasiswa ")])]},proxy:!0}],null,!0)}),Object.keys(t.datakrs).length?e("v-container",{attrs:{fluid:""}},[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("DataKRS",{attrs:{datakrs:t.datakrs,url:"/akademik/perkuliahan/krs/daftar",totalmatkul:t.totalMatkul,totalsks:t.totalSKS}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-card",[e("v-card-title",[t._v(" DAFTAR MATAKULIAH "),e("v-spacer"),e("v-btn",{staticClass:"ma-2",attrs:{color:"primary",icon:"",outlined:"",small:"",to:{path:"/akademik/perkuliahan/krs/"+this.krs_id+"/tambahmatkul"}}},[e("v-icon",[t._v("mdi-plus")])],1)],1),e("v-card-text",[e("v-data-table",{attrs:{dense:"",headers:t.headers,items:t.datatable,"item-key":"id","disable-pagination":!0,"hide-default-footer":!0,loading:t.datatableLoading,"loading-text":"Loading... Please wait"},scopedSlots:t._u([{key:"top",fn:function(){return[e("v-dialog",{attrs:{"max-width":"700px",persistent:""},model:{value:t.dialogfrm,callback:function(a){t.dialogfrm=a},expression:"dialogfrm"}},[e("v-form",{ref:"frmdata",attrs:{"lazy-validation":""},model:{value:t.form_valid,callback:function(a){t.form_valid=a},expression:"form_valid"}},[e("v-card",[e("v-card-title",[e("span",{staticClass:"headline"},[t._v("Pilih Kelas")])]),e("v-card-text",[e("v-row",{attrs:{"no-gutters":""}},[e("v-col",{attrs:{xs:"12",sm:"6",md:"6"}},[e("v-card",{attrs:{flat:""}},[e("v-card-title",[t._v("ID :")]),e("v-card-subtitle",[t._v(" "+t._s(t.datamatkul.id)+" ")])],1)],1),t.$vuetify.breakpoint.xsOnly?e("v-responsive",{attrs:{width:"100%"}}):t._e(),e("v-col",{attrs:{xs:"12",sm:"6",md:"6"}},[e("v-card",{attrs:{flat:""}},[e("v-card-title",[t._v("SKS :")]),e("v-card-subtitle",[t._v(" "+t._s(t.datamatkul.sks)+" ")])],1)],1),t.$vuetify.breakpoint.xsOnly?e("v-responsive",{attrs:{width:"100%"}}):t._e()],1),e("v-row",{attrs:{"no-gutters":""}},[e("v-col",{attrs:{xs:"12",sm:"6",md:"6"}},[e("v-card",{attrs:{flat:""}},[e("v-card-title",[t._v("KODE MATAKULIAH :")]),e("v-card-subtitle",[t._v(" "+t._s(t.datamatkul.kmatkul)+" ")])],1)],1),t.$vuetify.breakpoint.xsOnly?e("v-responsive",{attrs:{width:"100%"}}):t._e(),e("v-col",{attrs:{xs:"12",sm:"6",md:"6"}},[e("v-card",{attrs:{flat:""}},[e("v-card-title",[t._v("NAMA DOSEN PENGAMPU :")]),e("v-card-subtitle",[t._v(" "+t._s(t.datamatkul.nama_dosen_penyelenggaraan)+" ")])],1)],1),t.$vuetify.breakpoint.xsOnly?e("v-responsive",{attrs:{width:"100%"}}):t._e()],1),e("v-row",{attrs:{"no-gutters":""}},[e("v-col",{attrs:{xs:"12",sm:"6",md:"6"}},[e("v-card",{attrs:{flat:""}},[e("v-card-title",[t._v("NAMA MATAKULIAH :")]),e("v-card-subtitle",[t._v(" "+t._s(t.datamatkul.nmatkul)+" ")])],1)],1),t.$vuetify.breakpoint.xsOnly?e("v-responsive",{attrs:{width:"100%"}}):t._e(),e("v-col",{attrs:{xs:"12",sm:"6",md:"6"}},[e("v-card",{attrs:{flat:""}},[e("v-card-title",[t._v("NAMA DOSEN PENGAJAR :")]),e("v-card-subtitle",[t._v(" "+t._s(null==t.datamatkul.nama_dosen_kelas?"N.A":t.datamatkul.nama_dosen_kelas)+" ")])],1)],1),t.$vuetify.breakpoint.xsOnly?e("v-responsive",{attrs:{width:"100%"}}):t._e()],1),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-select",{attrs:{label:"DAFTAR KELAS",items:t.daftar_kelas,"item-value":"id","item-text":"nmatkul",outlined:""},model:{value:t.formdata.kelas_mhs_id,callback:function(a){t.$set(t.formdata,"kelas_mhs_id",a)},expression:"formdata.kelas_mhs_id"}})],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(a){return a.stopPropagation(),t.closedialogfrm(a)}}},[t._v("BATAL")]),e("v-btn",{attrs:{color:"blue darken-1",text:"",loading:t.btnLoading,disabled:!t.form_valid||t.btnLoading},on:{click:function(a){return a.stopPropagation(),t.save(a)}}},[t._v(" SIMPAN ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(a){var r=a.item;return[e("v-btn",{attrs:{small:"",icon:"",loading:t.btnLoading,disabled:t.btnLoading},on:{click:function(a){return a.stopPropagation(),t.showPilihKelas(r)}}},[e("v-icon",[t._v(" mdi-google-classroom ")])],1),e("v-btn",{attrs:{small:"",icon:"",loading:t.btnLoading,disabled:t.btnLoading},on:{click:function(a){return a.stopPropagation(),t.deleteItem(r)}}},[e("v-icon",[t._v(" mdi-delete ")])],1)]}},t.datatable.length>0?{key:"body.append",fn:function(){return[e("tr",{staticClass:"grey lighten-4 font-weight-black"},[e("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("TOTAL MATAKULIAH")]),e("td",[t._v(t._s(t.totalMatkul))]),e("td"),e("td"),e("td"),e("td")]),e("tr",{staticClass:"grey lighten-4 font-weight-black"},[e("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("TOTAL SKS")]),e("td",[t._v(t._s(t.totalSKS))]),e("td"),e("td"),e("td"),e("td")])]},proxy:!0}:null,{key:"no-data",fn:function(){return[t._v(" Data matakuliah belum tersedia silahkan tambah ")]},proxy:!0}],null,!0)})],1)],1)],1)],1)],1):t._e()],1)},n=[],s=(e("c975"),e("a434"),e("b64b"),e("96cf"),e("1da1")),i=e("e60c"),d=e("e477"),l=e("b468"),o={name:"PerkuliahanKRSDetail",created:function(){this.krs_id=this.$route.params.krsid,this.breadcrumbs=[{text:"HOME",disabled:!1,href:"/dashboard/"+this.$store.getters["auth/AccessToken"]},{text:"AKADEMIK",disabled:!1,href:"/akademik"},{text:"PERKULIAHAN",disabled:!1,href:"#"},{text:"KRS",disabled:!1,href:"/akademik/perkuliahan/krs/daftar"},{text:"DETAIL",disabled:!0,href:"#"}],this.fetchKRS()},data:function(){return{firstloading:!0,nama_prodi:null,tahun_akademik:null,semester_akademik:null,btnLoading:!1,btnLoadingTable:!1,form_valid:!0,krs_id:null,datakrs:{},datamatkul:{},dialogfrm:!1,daftar_kelas:[],formdata:{kelas_mhs_id:null},datatableLoading:!1,expanded:[],datatable:[],headers:[{text:"KODE",value:"kmatkul",sortable:!0,width:100},{text:"NAMA MATAKULIAH",value:"nmatkul",sortable:!0,width:300},{text:"SKS",value:"sks",sortable:!1,width:50},{text:"SMT",value:"semester",sortable:!1,width:50},{text:"KELAS",value:"nama_kelas",sortable:!1,width:200},{text:"NAMA DOSEN",value:"nama_dosen",sortable:!1,width:200},{text:"AKSI",value:"actions",sortable:!1,width:100}]}},methods:{fetchKRS:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$ajax.get("/akademik/perkuliahan/krs/"+t.krs_id,{headers:{Authorization:t.$store.getters["auth/Token"]}}).then((function(a){var e=a.data;if(t.datakrs=e.krs,t.datatable=e.krsmatkul,Object.keys(t.datakrs).length){var r=t.datakrs.kjur;t.nama_prodi=t.$store.getters["uiadmin/getProdiName"](r),t.tahun_akademik=t.datakrs.tahun,t.semester_akademik=t.datakrs.idsmt}}));case 2:case"end":return a.stop()}}),a)})))()},showPilihKelas:function(t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.$ajax.get("/akademik/perkuliahan/pembagiankelas/"+t.penyelenggaraan_id+"/penyelenggaraan",{headers:{Authorization:a.$store.getters["auth/Token"]}}).then((function(e){var r=e.data;a.dialogfrm=!0,a.datamatkul=t,a.daftar_kelas=r.daftarkelas,a.formdata.kelas_mhs_id=t.kelas_mhs_id}));case 2:case"end":return e.stop()}}),e)})))()},save:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$refs.frmdata.validate()){t.next=4;break}return this.btnLoading=!0,t.next=4,this.$ajax.post("/akademik/perkuliahan/pembagiankelas/storepeserta",{kelas_mhs_id:this.formdata.kelas_mhs_id,krsmatkul_id:this.datamatkul.id},{headers:{Authorization:this.$store.getters["auth/Token"]}}).then((function(){a.closedialogfrm(),a.fetchKRS(),a.btnLoading=!1})).catch((function(){a.btnLoading=!1}));case 4:case"end":return t.stop()}}),t,this)})));function a(){return t.apply(this,arguments)}return a}(),deleteItem:function(t){var a=this;this.$root.$confirm.open("Delete","Apakah Anda ingin menghapus matakuliah ("+t.nmatkul+") ?",{color:"red",width:600,desc:"proses ini juga menghapus seluruh data yang terkait dengan matkul ini."}).then((function(e){e&&(a.btnLoadingTable=!0,a.$ajax.post("/akademik/perkuliahan/krs/deletematkul/"+t.id,{_method:"DELETE"},{headers:{Authorization:a.$store.getters["auth/Token"]}}).then((function(){var e=a.datatable.indexOf(t);a.datatable.splice(e,1),a.btnLoadingTable=!1})).catch((function(){a.btnLoadingTable=!1})))}))},closedialogfrm:function(){var t=this;this.dialogfrm=!1,setTimeout((function(){t.datamatkul=Object.assign({},{}),t.$refs.frmdata.reset()}),300)}},computed:{totalMatkul:function(){return this.datatable.length},totalSKS:function(){var t,a=0;for(t in this.datatable)a+=parseInt(this.datatable[t].sks);return a}},components:{AkademikLayout:i["a"],ModuleHeader:d["a"],DataKRS:l["a"]}},u=o,c=e("2877"),m=e("6544"),k=e.n(m),v=e("0798"),h=e("2bc5"),f=e("8336"),b=e("b0af"),_=e("99d9"),p=e("62ad"),g=e("a523"),A=e("8fea"),x=e("169a"),y=e("4bd4"),w=e("132d"),S=e("6b53"),K=e("0fd9"),L=e("b974"),T=e("2fa4"),$=Object(c["a"])(u,r,n,!1,null,null,null);a["default"]=$.exports;k()($,{VAlert:v["a"],VBreadcrumbs:h["a"],VBtn:f["a"],VCard:b["a"],VCardActions:_["b"],VCardSubtitle:_["c"],VCardText:_["d"],VCardTitle:_["e"],VCol:p["a"],VContainer:g["a"],VDataTable:A["a"],VDialog:x["a"],VForm:y["a"],VIcon:w["a"],VResponsive:S["a"],VRow:K["a"],VSelect:L["a"],VSpacer:T["a"]})}}]);